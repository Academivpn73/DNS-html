<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Academi DNS Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&display=swap');

    :root{
      --card-bg: rgba(14, 44, 86, 0.01); /* Ø¢Ø¨ÛŒÙ Ù†ÛŒÙ…Ù‡â€ŒØ´ÙØ§Ù */
      --card-border: #58a6ff;
      --neon: #00ffd1;
      --btn1: #00ffd1;
      --btn2: #44ff88;
    }

    body{
      font-family: "Orbitron", system-ui, sans-serif;
      margin:0; color:#eee; background:#0b0b0b;
      background-image: url("./gaming-bg.jpg"); /* â† ØªØµÙˆÛŒØ± Ø´Ù…Ø§ */
      background-position: center center;
      background-size: cover;
      background-attachment: fixed;
    }

    /* Ù„Ø§ÛŒÙ‡ ØªÛŒØ±Ù‡â€ŒÛŒ Ø®ÛŒÙ„ÛŒ Ù…Ù„Ø§ÛŒÙ… Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ */
    body::before{
      content:""; position:fixed; inset:0;
      background: radial-gradient(ellipse at 50% 0%, rgba(0,0,0,.35), rgba(0,0,0,.65) 60%);
      pointer-events:none; z-index:-1;
    }

    .title{
      color:#00ff88;
      text-shadow:none; /* Ø­Ø°Ù Ù†ÙˆØ± Ø²ÛŒØ± Ù…ØªÙ† Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ */
      letter-spacing:.5px;
    }

    .subline a{
      color: var(--neon); text-decoration:none; font-weight:800;
      padding: .1rem .25rem; border-bottom: 2px dashed rgba(0,255,209,.35);
      transition:transform .15s ease, filter .15s ease, text-shadow .2s ease;
      display:inline-block;
      animation: glowPulse 2.2s infinite alternate;
    }
    .subline a:hover{
      transform: translateY(-1px) scale(1.02);
      text-shadow: 0 0 12px var(--neon), 0 0 24px #00ffa6;
      filter: drop-shadow(0 0 8px rgba(0,255,209,.45));
    }
    @keyframes glowPulse{
      from{ text-shadow: 0 0 6px var(--neon); }
      to{   text-shadow: 0 0 18px var(--neon), 0 0 30px #00ffa6; }
    }

    .card{
      background: var(--card-bg);
      border: 1.5px solid var(--card-border);
      border-radius: 18px;
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,.35), 0 0 18px rgba(68, 136, 255, .25);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 40px rgba(0,0,0,.5), 0 0 26px rgba(68, 136, 255, .35);
    }

    .btn{
      background: linear-gradient(90deg, var(--btn1), var(--btn2));
      color:#0b0b0b; font-weight:900;
      border-radius: 12px; padding:.65rem 1rem;
      box-shadow: 0 0 16px rgba(0,255,180,.45);
      transition: transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.02); box-shadow:0 0 22px rgba(0,255,180,.65); }

    /* ÙØ±Ù…â€ŒÙ‡Ø§ Ùˆ Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ Ø¯Ø§Ø®Ù„ Ú©Ø§Ø±Øª: Ù…ØªÙ† Ù…Ø´Ú©ÛŒ */
    .card label, .card input, .card select, .card .out{
      color:#0b0b0b;
    }
    .input{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.15);
      border-radius:10px; padding:.5rem .6rem; outline:none;
    }
    .input:focus{ box-shadow: 0 0 0 3px rgba(0,255,209,.25); }

    .dns-item{
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.15);
      border-radius: 14px;
      padding: .75rem .9rem;
      display:flex; flex-direction: column; gap:.35rem;
    }
    .dns-title{ font-weight:900; color:#0b0b0b; }
    .dns-meta { color:#111; font-weight:700; font-size:.95rem; }
    .dns-ping { color:#0b0b0b; font-weight:900; }

    .tag{
      background: #e6f7ff; color:#082b46;
      padding:.1rem .5rem; border-radius: 999px; font-weight:800; font-size:.8rem;
      border:1px solid #bde8ff;
    }

    .hr{ height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.5), transparent); border:0; }
  </style>
</head>
<body class="p-6 md:p-10">

  <!-- Ø¹Ù†ÙˆØ§Ù† -->
  <header class="text-center mb-6 md:mb-8">
    <h1 class="title text-4xl md:text-6xl font-extrabold">ğŸ® Academi DNS Panel ğŸ®</h1>
    <p class="subline mt-3 md:mt-4 text-sm md:text-base">
      Telegram:
      <a href="https://t.me/Academi_vpn" target="_blank">@Academi_vpn</a>
      &nbsp;|&nbsp;
      Admin By:
      <a href="https://t.me/MahdiAGM0" target="_blank">@MahdiAGM0</a>
    </p>
  </header>

  <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8">

    <!-- Generate DNS -->
    <section class="card p-5 md:p-7">
      <h2 class="text-xl md:text-2xl font-extrabold text-white mb-4">âš¡ Generate DNS (ÙˆØ§Ù‚Ø¹ÛŒ)</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <label class="flex flex-col gap-2">
          Ú†Ù†Ø¯ ØªØ§ DNSØŸ
          <input id="g-count" type="number" min="1" max="10" value="3" class="input">
        </label>

        <label class="flex flex-col gap-2">
          Ú©Ø´ÙˆØ±
          <select id="g-country" class="input">
            <option value="ir">ğŸ‡®ğŸ‡· Ø§ÛŒØ±Ø§Ù†</option>
            <option value="us">ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§</option>
            <option value="de">ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†</option>
            <option value="uk">ğŸ‡¬ğŸ‡§ Ø§Ù†Ú¯Ù„ÛŒØ³</option>
            <option value="fr">ğŸ‡«ğŸ‡· ÙØ±Ø§Ù†Ø³Ù‡</option>
            <option value="ca">ğŸ‡¨ğŸ‡¦ Ú©Ø§Ù†Ø§Ø¯Ø§</option>
            <option value="jp">ğŸ‡¯ğŸ‡µ Ú˜Ø§Ù¾Ù†</option>
            <option value="kr">ğŸ‡°ğŸ‡· Ú©Ø±Ù‡â€ŒØ¬Ù†ÙˆØ¨ÛŒ</option>
            <option value="in">ğŸ‡®ğŸ‡³ Ù‡Ù†Ø¯</option>
            <option value="ru">ğŸ‡·ğŸ‡º Ø±ÙˆØ³ÛŒÙ‡</option>
            <option value="tr">ğŸ‡¹ğŸ‡· ØªØ±Ú©ÛŒÙ‡</option>
            <option value="br">ğŸ‡§ğŸ‡· Ø¨Ø±Ø²ÛŒÙ„</option>
          </select>
        </label>

        <label class="flex flex-col gap-2">
          Ù†ÙˆØ¹ IP
          <select id="g-type" class="input">
            <option value="ipv4">IPv4</option>
            <option value="ipv6">IPv6</option>
          </select>
        </label>

        <label class="flex flex-col gap-2">
          Ø¯ÛŒÙˆØ§ÛŒØ³
          <select id="g-device" class="input">
            <option>PC</option>
            <option>Mobile (Android / iOS)</option>
            <option>PlayStation 4</option>
            <option>PlayStation 5</option>
            <option>Xbox One</option>
            <option>Xbox Series X</option>
            <option>Nintendo Switch</option>
          </select>
        </label>

        <label class="col-span-1 md:col-span-2 flex flex-col gap-2">
          Ú¯ÛŒÙ…
          <select id="g-game" class="input">
            <!-- 80 Ø¨Ø§Ø²ÛŒ Ù…Ø­Ø¨ÙˆØ¨ -->
            <option>PUBG</option><option>Valorant</option><option>Fortnite</option><option>CS:GO</option>
            <option>Call of Duty</option><option>Warzone</option><option>Apex Legends</option><option>Rainbow Six Siege</option>
            <option>Rocket League</option><option>Overwatch 2</option><option>League of Legends</option><option>Dota 2</option>
            <option>GTA Online</option><option>Minecraft</option><option>Rust</option><option>ARK</option>
            <option>Destiny 2</option><option>Battlefield</option><option>Halo Infinite</option><option>Counter-Strike 2</option>
            <option>Starfield</option><option>Elden Ring</option><option>Diablo IV</option><option>Path of Exile</option>
            <option>Lost Ark</option><option>Guild Wars 2</option><option>Team Fortress 2</option><option>Smite</option>
            <option>Paladins</option><option>For Honor</option><option>Sea of Thieves</option><option>Fall Guys</option>
            <option>Among Us</option><option>Escape from Tarkov</option><option>War Thunder</option><option>Crossfire</option>
            <option>Metin2</option><option>Lineage II</option><option>World of Warcraft</option><option>Final Fantasy XIV</option>
            <option>FIFA 23</option><option>EA FC 24</option><option>eFootball</option><option>NBA 2K</option>
            <option>PES 2023</option><option>Forza Horizon</option><option>Gran Turismo</option><option>Need for Speed</option>
            <option>Monster Hunter</option><option>DayZ</option><option>V Rising</option><option>Valheim</option>
            <option>Warframe</option><option>Call of Duty Mobile</option><option>Free Fire</option><option>Mobile Legends</option>
            <option>Clash of Clans</option><option>Clash Royale</option><option>Brawl Stars</option><option>Roblox</option>
            <option>World of Tanks</option><option>World of Warships</option><option>Overcooked</option><option>Payday 3</option>
            <option>Payday 2</option><option>Dead by Daylight</option><option>Hunt: Showdown</option><option>Insurgency: Sandstorm</option>
            <option>COD Black Ops Cold War</option><option>COD Modern Warfare II</option><option>COD Vanguard</option><option>Quake Champions</option>
            <option>Heroes & Generals</option><option>Splitgate</option><option>Rogue Company</option><option>Spellbreak</option>
            <option>Hyper Scape</option><option>Destiny 2 (Steam)</option><option>Path of Titans</option><option>Palworld</option>
          </select>
          <div class="flex gap-2 items-center">
            <input id="g-game-custom" class="input flex-1" placeholder="Ø§Ú¯Ù‡ Ø¨Ø§Ø²ÛŒØª ØªÙˆ Ù„ÛŒØ³Øª Ù†ÛŒØ³ØªØŒ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
            <span class="tag">Ø§Ø®ØªÛŒØ§Ø±ÛŒ</span>
          </div>
        </label>
      </div>

      <div class="mt-4 flex flex-wrap gap-3">
        <button class="btn" onclick="generateDNS()">Generate DNS</button>
        <button class="btn" onclick="generateDNS()">Regenerate</button>
      </div>

      <hr class="hr my-5" />
      <div id="gen-output" class="grid gap-3"></div>
    </section>

    <!-- Download DNS (ØªØ­Ø±ÛŒÙ…â€ŒØ´Ú©Ù†) -->
    <section class="card p-5 md:p-7">
      <h2 class="text-xl md:text-2xl font-extrabold text-white mb-4">ğŸ“¥ DNS Ø¯Ø§Ù†Ù„ÙˆØ¯ (ØªØ­Ø±ÛŒÙ…â€ŒØ´Ú©Ù†)</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <label class="flex flex-col gap-2">
          Ú†Ù†Ø¯ ØªØ§ DNS Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒØŸ
          <input id="d-count" type="number" min="1" max="10" value="3" class="input">
        </label>
        <div class="flex items-end">
          <button class="btn w-full" onclick="downloadDNS()">DNS Ø¬Ø¯ÛŒØ¯ Ø¨Ø¯Ù‡</button>
        </div>
      </div>
      <hr class="hr my-5" />
      <div id="down-output" class="grid gap-3"></div>
    </section>

    <!-- Test DNS Ø¢Ù…Ø§Ø¯Ù‡ -->
    <section class="card p-5 md:p-7">
      <h2 class="text-xl md:text-2xl font-extrabold text-white mb-4">âš¡ Test DNS (Ø¢Ù…Ø§Ø¯Ù‡)</h2>
      <p class="out text-sm mb-3">Û²Û° DNS Ø§ÛŒØ±Ø§Ù†ÛŒ/Ø¬Ù‡Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª (Primary/Secondary + Ù¾ÛŒÙ†Ú¯ ØªÙ‚Ø±ÛŒØ¨ÛŒ DoH/HTTP)</p>
      <div class="flex items-end gap-3">
        <button class="btn" onclick="renderTestList()">Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª</button>
        <button class="btn" onclick="pingAllShown()">Ù¾ÛŒÙ†Ú¯â€ŒÚ¯Ø±ÙØªÙ† Ù‡Ù…Ù‡</button>
      </div>
      <hr class="hr my-5" />
      <div id="test-output" class="grid gap-3"></div>
    </section>

    <!-- Custom DNS Ping (Ø¯Ùˆ Ø¹Ø¯Ø¯) -->
    <section class="card p-5 md:p-7">
      <h2 class="text-xl md:text-2xl font-extrabold text-white mb-4">ğŸ“¡ Ù¾ÛŒÙ†Ú¯ DNS Ø¯Ù„Ø®ÙˆØ§Ù‡ (Primary & Secondary)</h2>
      <div class="grid grid-cols-1 gap-3">
        <input id="c-prim" class="input" placeholder="DNS Primary (IPv4 ÛŒØ§ IPv6 ÛŒØ§ DoH URL)">
        <input id="c-sec"  class="input" placeholder="DNS Secondary (IPv4 ÛŒØ§ IPv6 ÛŒØ§ DoH URL)">
        <button class="btn w-full" onclick="pingCustom()">Ù¾ÛŒÙ†Ú¯ Ø¨Ú¯ÛŒØ±</button>
      </div>
      <hr class="hr my-5" />
      <div id="custom-output" class="grid gap-3"></div>
    </section>

  </main>

  <script>
    /******************************
     * DNS ÙˆØ§Ù‚Ø¹ÛŒ (Primary/Secondary) Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©Ø´ÙˆØ±/Ù†ÙˆØ¹
     * Ø´Ø§Ù…Ù„ DoH Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ ÙˆÙ‚ØªÛŒ Ù…Ù…Ú©Ù†Ù‡
     ******************************/
    const DNS_CATALOG = {
      // Ø§ÛŒØ±Ø§Ù† (Ø´Ù†Ø§Ø®ØªÙ‡â€ŒØ´Ø¯Ù‡)
      ir: [
        { name: "Shecan",     v4: ["178.22.122.100","185.51.200.2"], v6: [], doh: ["https://dns.shecan.ir/dns-query"] },
        // Ù…ÙˆØ§Ø±Ø¯ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¯ÛŒÚ¯Ø± Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù…ÙˆÙ…ÛŒ Ú©Ù…ØªØ±Ù†Ø¯Ø› Ù‡Ù…ÛŒÙ† Ø±Ø§ Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±ÛŒÙ… ØªØ§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ù†Ø´ÙˆØ¯.
      ],
      // Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ
      us: [
        { name: "Cloudflare", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] },
        { name: "Google",     v4: ["8.8.8.8","8.8.4.4"], v6: ["2001:4860:4860::8888","2001:4860:4860::8844"], doh: ["https://dns.google/dns-query","https://dns.google/resolve?name=example.com"] },
        { name: "Quad9",      v4: ["9.9.9.9","149.112.112.112"], v6: ["2620:fe::fe","2620:fe::9"], doh: ["https://dns.quad9.net/dns-query"] },
        { name: "OpenDNS",    v4: ["208.67.222.222","208.67.220.220"], v6: [], doh: ["https://doh.opendns.com/dns-query"] },
        { name: "AdGuard",    v4: ["94.140.14.14","94.140.15.15"], v6: ["2a10:50c0::ad1:ff","2a10:50c0::ad2:ff"], doh: ["https://dns.adguard.com/dns-query"] },
        { name: "CleanBrowsing", v4: ["185.228.168.9","185.228.169.9"], v6: [], doh: ["https://doh.cleanbrowsing.org/doh/security-filter"] },
      ],
      de: [{ name: "Cloudflare (DE)", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] }],
      uk: [{ name: "Google (UK)",     v4: ["8.8.8.8","8.8.4.4"], v6: ["2001:4860:4860::8888","2001:4860:4860::8844"], doh: ["https://dns.google/dns-query"] }],
      fr: [{ name: "Quad9 (FR)",      v4: ["9.9.9.9","149.112.112.112"], v6: ["2620:fe::fe","2620:fe::9"], doh: ["https://dns.quad9.net/dns-query"] }],
      ca: [{ name: "Cloudflare (CA)", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] }],
      jp: [{ name: "Google (JP)",     v4: ["8.8.8.8","8.8.4.4"], v6: ["2001:4860:4860::8888","2001:4860:4860::8844"], doh: ["https://dns.google/dns-query"] }],
      kr: [{ name: "Cloudflare (KR)", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] }],
      in: [{ name: "Google (IN)",     v4: ["8.8.8.8","8.8.4.4"], v6: ["2001:4860:4860::8888","2001:4860:4860::8844"], doh: ["https://dns.google/dns-query"] }],
      ru: [{ name: "Cloudflare (RU)", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] }],
      tr: [{ name: "Google (TR)",     v4: ["8.8.8.8","8.8.4.4"], v6: ["2001:4860:4860::8888","2001:4860:4860::8844"], doh: ["https://dns.google/dns-query"] }],
      br: [{ name: "Cloudflare (BR)", v4: ["1.1.1.1","1.0.0.1"], v6: ["2606:4700:4700::1111","2606:4700:4700::1001"], doh: ["https://cloudflare-dns.com/dns-query"] }],
    };

    // Ù„ÛŒØ³Øª ØªØ­Ø±ÛŒÙ…â€ŒØ´Ú©Ù†Ù Ø¯Ø§Ù†Ù„ÙˆØ¯ÛŒ (DoH Ù…Ø­ÙˆØ±)
    const UNBLOCK_LIST = [
      { name:"Cloudflare",   v4:["1.1.1.1","1.0.0.1"], doh:["https://cloudflare-dns.com/dns-query"] },
      { name:"Google",       v4:["8.8.8.8","8.8.4.4"], doh:["https://dns.google/dns-query"] },
      { name:"Quad9",        v4:["9.9.9.9","149.112.112.112"], doh:["https://dns.quad9.net/dns-query"] },
      { name:"AdGuard",      v4:["94.140.14.14","94.140.15.15"], doh:["https://dns.adguard.com/dns-query"] },
      { name:"OpenDNS",      v4:["208.67.222.222","208.67.220.220"], doh:["https://doh.opendns.com/dns-query"] },
      { name:"CleanBrowsing",v4:["185.228.168.9","185.228.169.9"], doh:["https://doh.cleanbrowsing.org/doh/security-filter"] },
      // Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ Ú©Ù‡ DoH Ø¹Ù…ÙˆÙ…ÛŒ Ø¯Ø§Ø±Ù†Ø¯
    ];

    // 20 DNS Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª (Ø§ÛŒØ±Ø§Ù† + Ø¬Ù‡Ø§Ù†ÛŒ)
    const TEST_SET = [
      { dc:"Shecan ğŸ‡®ğŸ‡·", primary:"178.22.122.100", secondary:"185.51.200.2", type:"IPv4", doh:"https://dns.shecan.ir/dns-query" },
      { dc:"Cloudflare", primary:"1.1.1.1", secondary:"1.0.0.1", type:"IPv4", doh:"https://cloudflare-dns.com/dns-query" },
      { dc:"Google", primary:"8.8.8.8", secondary:"8.8.4.4", type:"IPv4", doh:"https://dns.google/dns-query" },
      { dc:"Quad9", primary:"9.9.9.9", secondary:"149.112.112.112", type:"IPv4", doh:"https://dns.quad9.net/dns-query" },
      { dc:"AdGuard", primary:"94.140.14.14", secondary:"94.140.15.15", type:"IPv4", doh:"https://dns.adguard.com/dns-query" },
      { dc:"OpenDNS", primary:"208.67.222.222", secondary:"208.67.220.220", type:"IPv4", doh:"https://doh.opendns.com/dns-query" },
      { dc:"CleanBrowsing", primary:"185.228.168.9", secondary:"185.228.169.9", type:"IPv4", doh:"https://doh.cleanbrowsing.org/doh/security-filter" },
      { dc:"Cloudflare v6", primary:"2606:4700:4700::1111", secondary:"2606:4700:4700::1001", type:"IPv6", doh:"https://cloudflare-dns.com/dns-query" },
      { dc:"Google v6", primary:"2001:4860:4860::8888", secondary:"2001:4860:4860::8844", type:"IPv6", doh:"https://dns.google/dns-query" },
      { dc:"Quad9 v6", primary:"2620:fe::fe", secondary:"2620:fe::9", type:"IPv6", doh:"https://dns.quad9.net/dns-query" },
      // Ø¨Ø±Ø§ÛŒ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ 20
      { dc:"Cloudflare-2", primary:"1.1.1.1", secondary:"1.0.0.1", type:"IPv4", doh:"https://cloudflare-dns.com/dns-query" },
      { dc:"Google-2", primary:"8.8.8.8", secondary:"8.8.4.4", type:"IPv4", doh:"https://dns.google/dns-query" },
      { dc:"Quad9-2", primary:"9.9.9.9", secondary:"149.112.112.112", type:"IPv4", doh:"https://dns.quad9.net/dns-query" },
      { dc:"AdGuard-2", primary:"94.140.14.14", secondary:"94.140.15.15", type:"IPv4", doh:"https://dns.adguard.com/dns-query" },
      { dc:"OpenDNS-2", primary:"208.67.222.222", secondary:"208.67.220.220", type:"IPv4", doh:"https://doh.opendns.com/dns-query" },
      { dc:"CleanBrowsing-2", primary:"185.228.168.9", secondary:"185.228.169.9", type:"IPv4", doh:"https://doh.cleanbrowsing.org/doh/security-filter" },
      { dc:"Cloudflare v6-2", primary:"2606:4700:4700::1111", secondary:"2606:4700:4700::1001", type:"IPv6", doh:"https://cloudflare-dns.com/dns-query" },
      { dc:"Google v6-2", primary:"2001:4860:4860::8888", secondary:"2001:4860:4860::8844", type:"IPv6", doh:"https://dns.google/dns-query" },
      { dc:"Quad9 v6-2", primary:"2620:fe::fe", secondary:"2620:fe::9", type:"IPv6", doh:"https://dns.quad9.net/dns-query" },
      { dc:"Shecan-2 ğŸ‡®ğŸ‡·", primary:"178.22.122.100", secondary:"185.51.200.2", type:"IPv4", doh:"https://dns.shecan.ir/dns-query" },
    ];

    /* Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ */
    const sampleName = "example.com";

    // Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ RTT Ø¨Ø§ DoH Ø§Ú¯Ø± URL Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø´ÛŒÙ…
    async function dohPing(dohUrl, timeoutMs=4500){
      const controller = new AbortController();
      const timer = setTimeout(()=>controller.abort(), timeoutMs);
      const t0 = performance.now();
      try{
        // Ø³Ø§Ø¯Ù‡: Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø¨Ù‡ DoH endpoint Ø¨Ø§ ÛŒÚ© Ù†Ø§Ù… Ù…Ø¹Ù…ÙˆÙ„ÛŒ
        const u = dohUrl.includes("?") ? `${dohUrl}` : `${dohUrl}?name=${sampleName}&type=A`;
        await fetch(u, { method:"GET", signal: controller.signal, cache:"no-store" });
        return Math.max(1, Math.round(performance.now()-t0));
      }catch(e){
        return null;
      }finally{ clearTimeout(timer); }
    }

    // Ø§Ú¯Ø± DoH Ù†Ø¯Ø§Ø±ÛŒÙ…ØŒ ØªÙ„Ø§Ø´ HTTP/HTTPS no-cors Ø¨Ù‡ Ø®ÙˆØ¯ IP/Host Ø¨Ø±Ø§ÛŒ ØªØ®Ù…ÛŒÙ† RTT
    async function httpProbe(host, timeoutMs=4500){
      const controller = new AbortController();
      const timer = setTimeout(()=>controller.abort(), timeoutMs);
      const t0 = performance.now();
      // Ø§ÙˆÙ„ HTTPSØŒ Ø¨Ø¹Ø¯ HTTP
      const candidates = [`https://${host}/`, `http://${host}/`];
      try{
        for (const url of candidates){
          try{
            await fetch(url, { mode:"no-cors", signal: controller.signal, cache:"no-store" });
            return Math.max(1, Math.round(performance.now()-t0));
          }catch(_){}
        }
        return null;
      }catch(_){ return null; }
      finally{ clearTimeout(timer); }
    }

    // Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ø¯ÙˆÙ… Ø§Ù…Ù† Ø§Ø² Ø¢Ø±Ø§ÛŒÙ‡
    const pick = (arr)=> arr[Math.floor(Math.random()*arr.length)];

    // ØªÙˆÙ„ÛŒØ¯ DNS ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² Ú©Ø§ØªØ§Ù„ÙˆÚ¯
    async function generateDNS(){
      const cnt = Math.min(10, Math.max(1, parseInt(document.getElementById('g-count').value||"1")));
      const country = document.getElementById('g-country').value;
      const type = document.getElementById('g-type').value; // ipv4 / ipv6
      const device = document.getElementById('g-device').value;
      const gameSel = document.getElementById('g-game').value;
      const customName = document.getElementById('g-game-custom').value.trim();
      const game = customName || gameSel;

      const pool = DNS_CATALOG[country] || [];
      const out = document.getElementById('gen-output');
      out.innerHTML = "";

      if (!pool.length){
        out.innerHTML = `<div class="dns-item"><div class="dns-title">Ø¯Ø± Ø§ÛŒÙ† Ú©Ø´ÙˆØ± Ø¯ÛŒØªØ§Ø³Øª Ù…Ø­Ø¯ÙˆØ¯Ù‡.</div><div class="dns-meta">Ú©Ø´ÙˆØ± Ø¯ÛŒÚ¯Ø±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.</div></div>`;
        return;
      }

      for (let i=0; i<cnt; i++){
        const prov = pick(pool);
        const pair = (type==="ipv6" && prov.v6.length>=2) ? prov.v6.slice(0,2)
                    : (type==="ipv6" && prov.v6.length===1) ? [prov.v6[0], prov.v6[0]]
                    : prov.v4.length>=2 ? prov.v4.slice(0,2)
                    : prov.v4.length===1 ? [prov.v4[0], prov.v4[0]]
                    : [];

        const doh = prov.doh?.[0] || null;
        const box = document.createElement('div');
        box.className = "dns-item";

        box.innerHTML = `
          <div class="flex items-center justify-between">
            <div class="dns-title">${game} DNS â€” <span class="tag">${prov.name}</span> <span class="tag">${type.toUpperCase()}</span> <span class="tag">${country.toUpperCase()}</span> <span class="tag">${device}</span></div>
            <button class="btn text-xs" onclick="copyText('${pair.join(', ')}')">Copy</button>
          </div>
          <div class="dns-meta">Primary: <b>${pair[0]||'-'}</b> &nbsp;|&nbsp; Secondary: <b>${pair[1]||'-'}</b></div>
          <div class="dns-ping" data-doh="${doh||''}" data-prim="${pair[0]||''}" data-sec="${pair[1]||''}">â± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒÙ†Ú¯...</div>
        `;
        out.appendChild(box);

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ (DoH Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø§Ø±Ù‡)
        (async ()=>{
          let rtt = null;
          if (doh) rtt = await dohPing(doh);
          if (rtt===null && pair[0]) rtt = await httpProbe(pair[0]); // fallback
          box.querySelector('.dns-ping').textContent = rtt? `â± Ù¾ÛŒÙ†Ú¯ ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${rtt}ms` : "â± Ù¾ÛŒÙ†Ú¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª";
        })();
      }
    }

    // Download DNS (ØªØ­Ø±ÛŒÙ…â€ŒØ´Ú©Ù†) Ø¨Ø§ Ø´Ù…Ø§Ø±Ø´ Ùˆ Ù¾ÛŒÙ†Ú¯
    async function downloadDNS(){
      const cnt = Math.min(10, Math.max(1, parseInt(document.getElementById('d-count').value||"1")));
      const out = document.getElementById('down-output');
      out.innerHTML = "";

      let list = [];
      for (let i=0; i<cnt; i++) list.push( pick(UNBLOCK_LIST) );

      for (const item of list){
        const primary = item.v4[0], secondary = item.v4[1] || item.v4[0];
        const doh = item.doh?.[0] || null;

        const box = document.createElement('div');
        box.className = "dns-item";
        box.innerHTML = `
          <div class="flex items-center justify-between">
            <div class="dns-title">ğŸŒ ${item.name} <span class="tag">Unblock</span></div>
            <button class="btn text-xs" onclick="copyText('${primary}, ${secondary}')">Copy</button>
          </div>
          <div class="dns-meta">Primary: <b>${primary}</b> &nbsp;|&nbsp; Secondary: <b>${secondary}</b></div>
          <div class="dns-ping">â± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒÙ†Ú¯...</div>
        `;
        out.appendChild(box);

        (async ()=>{
          let rtt = null;
          if (doh) rtt = await dohPing(doh);
          if (rtt===null) rtt = await httpProbe(primary);
          box.querySelector('.dns-ping').textContent = rtt? `â± Ù¾ÛŒÙ†Ú¯ ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${rtt}ms` : "â± Ù¾ÛŒÙ†Ú¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª";
        })();
      }
    }

    // Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª ØªØ³Øª Ø¢Ù…Ø§Ø¯Ù‡
    function renderTestList(){
      const out = document.getElementById('test-output');
      out.innerHTML = "";
      for (const t of TEST_SET){
        const box = document.createElement('div');
        box.className = "dns-item";
        box.innerHTML = `
          <div class="flex items-center justify-between">
            <div class="dns-title">${t.dc} <span class="tag">${t.type}</span></div>
            <button class="btn text-xs" onclick="copyText('${t.primary}, ${t.secondary}')">Copy</button>
          </div>
          <div class="dns-meta">Primary: <b>${t.primary}</b> &nbsp;|&nbsp; Secondary: <b>${t.secondary}</b></div>
          <div class="dns-ping" data-doh="${t.doh||''}" data-prim="${t.primary}" data-sec="${t.secondary}">â± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒÙ†Ú¯...</div>
        `;
        out.appendChild(box);
      }
    }

    // Ù¾ÛŒÙ†Ú¯ Ú¯Ø±ÙØªÙ† Ù‡Ù…Ù‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´â€ŒØ¯Ø§Ø¯Ù‡â€ŒØ´Ø¯Ù‡
    async function pingAllShown(){
      const items = document.querySelectorAll('#test-output .dns-ping');
      for (const el of items){
        const doh = el.getAttribute('data-doh');
        const prim = el.getAttribute('data-prim');
        let rtt = null;
        if (doh) rtt = await dohPing(doh);
        if (rtt===null && prim) rtt = await httpProbe(prim);
        el.textContent = rtt? `â± Ù¾ÛŒÙ†Ú¯ ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${rtt}ms` : "â± Ù¾ÛŒÙ†Ú¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª";
      }
    }

    // Ù¾ÛŒÙ†Ú¯ DNS Ø¯Ù„Ø®ÙˆØ§Ù‡ (Ø¯Ùˆ Ø¹Ø¯Ø¯)
    async function pingCustom(){
      const prim = document.getElementById('c-prim').value.trim();
      const sec  = document.getElementById('c-sec').value.trim();
      const out  = document.getElementById('custom-output');
      out.innerHTML = "";

      const rows = [
        { label:"Primary", target:prim },
        { label:"Secondary", target:sec },
      ];

      for (const r of rows){
        if (!r.target){
          const box = document.createElement('div');
          box.className = "dns-item";
          box.innerHTML = `<div class="dns-title">${r.label}</div><div class="dns-meta">Ø¢Ø¯Ø±Ø³ ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡.</div>`;
          out.appendChild(box);
          continue;
        }

        const box = document.createElement('div');
        box.className = "dns-item";
        box.innerHTML = `
          <div class="flex items-center justify-between">
            <div class="dns-title">${r.label}</div>
            <button class="btn text-xs" onclick="copyText('${r.target}')">Copy</button>
          </div>
          <div class="dns-meta">Target: <b>${r.target}</b></div>
          <div class="dns-ping">â± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒÙ†Ú¯...</div>
        `;
        out.appendChild(box);

        // Ø§Ú¯Ø± ÙˆØ±ÙˆØ¯ÛŒ ÛŒÚ© URL DoH Ø¨Ø§Ø´Ø¯ (Ø´Ø±ÙˆØ¹ Ø¨Ø§ http)
        let rtt = null;
        if (/^https?:\/\//i.test(r.target)){
          rtt = await dohPing(r.target);
        }else{
          // ÙˆØ±ÙˆØ¯ÛŒ IP/Ø¯Ø§Ù…Ù†Ù‡: ØªÙ„Ø§Ø´ DoH Ø¹Ù…ÙˆÙ…ÛŒ Ø±Ø§ÛŒØ¬ (ØºÛŒØ±Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù‡Ù…Ù‡ IPÙ‡Ø§ DoH Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯)
          // Ù¾Ø³ ÛŒÚ© fallback Ù‡Ù… Ù…ÛŒâ€ŒØ²Ù†ÛŒÙ… Ø±ÙˆÛŒ HTTP/HTTPS no-cors Ø¨Ù‡ Ø®ÙˆØ¯ target
          rtt = await httpProbe(r.target);
        }
        box.querySelector('.dns-ping').textContent = rtt? `â± Ù¾ÛŒÙ†Ú¯ ØªÙ‚Ø±ÛŒØ¨ÛŒ: ${rtt}ms` : "â± Ù¾ÛŒÙ†Ú¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª";
      }
    }

    function copyText(t){ navigator.clipboard.writeText(t); alert("âœ… Ú©Ù¾ÛŒ Ø´Ø¯:\n" + t); }
  </script>
</body>
</html>
