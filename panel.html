<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Academi DNS Panel — v1.0.6</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- فونت‌ها -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent1:#00ff88;
      --accent2:#38bdf8;
      --glass: rgba(10,10,15,0.45);
      --input-bg: rgba(0,0,0,0.5);
      --input-border: rgba(56,189,248,0.9);
      --glow: rgba(34,197,94,0.65);
      --text-light:#ecfdf5;
      --muted:#bfeee0;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;padding:20px;
      font-family:"Vazirmatn", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: url('gaming-bg.jpg') center/cover fixed no-repeat;
      background-size:cover;
      color:var(--text-light);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{max-width:1180px;margin:0 auto}
    .header{text-align:center;margin-bottom:20px}
    .brand{
      font-family:"Poppins", sans-serif;
      font-weight:900;
      font-size:40px;
      display:inline-block;
      background:linear-gradient(90deg,var(--accent1),var(--accent2));
      -webkit-background-clip:text;background-clip:text;color:transparent;
      text-shadow:0 8px 40px rgba(0,0,0,0.6);
      padding:6px 14px;border-radius:12px;
    }
    .meta{margin-top:8px;color:var(--muted);font-size:13px;display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap}
    .meta a{color:#bafbe7;text-decoration:none;font-weight:700}
    .meta a:hover{text-decoration:underline}

    .card{
      background:var(--glass);
      border:1px solid rgba(255,255,255,0.06);
      backdrop-filter: blur(8px) saturate(120%);
      border-radius:14px;
      padding:16px;margin-bottom:16px;
      box-shadow:0 10px 40px rgba(2,6,23,0.55);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .card:hover{transform:translateY(-4px);box-shadow:0 18px 60px rgba(2,6,23,0.7)}
    .card h2{color:var(--accent1);font-weight:800;margin:0 0 10px 0;font-size:18px}

    .form-row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:10px}
    .form-item{display:flex;align-items:center;gap:8px;min-width:150px}
    label{min-width:110px;color:var(--muted);font-weight:700;font-size:14px}

    select,input[type="text"],input[type="number"],input[type="search"]{
      background:var(--input-bg);
      color:#000;
      font-weight:700;
      padding:8px 12px;
      border-radius:10px;
      border:1px solid var(--input-border);
      min-width:140px;
      box-shadow:0 0 12px var(--glow);
      transition: all .28s cubic-bezier(.2,.9,.3,1);
      -webkit-appearance:none;appearance:none;
    }
    select:focus,input:focus{outline:none;transform:translateY(-2px);box-shadow:0 0 20px var(--glow)}
    .small-input{min-width:90px;padding:6px 8px;border-radius:8px;font-size:.95rem}

    .btn{
      background:linear-gradient(90deg,var(--accent1),var(--accent2));
      color:#000;font-weight:800;padding:10px 18px;border-radius:12px;border:none;cursor:pointer;
      transition:all .22s;box-shadow:0 6px 26px rgba(0,255,136,0.12),0 0 18px rgba(56,189,248,0.08);
    }
    .btn:hover{transform:scale(1.06);box-shadow:0 12px 48px rgba(0,255,136,0.18),0 0 36px rgba(56,189,248,0.12)}

    .dns-list{margin-top:12px;display:grid;gap:10px}
    .dns-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:12px;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.04);box-shadow:0 6px 24px rgba(2,6,12,0.45),0 0 12px rgba(34,197,94,0.12);transition:transform .18s,box-shadow .18s}
    .dns-item:hover{transform:translateY(-4px);box-shadow:0 18px 60px rgba(2,6,12,0.6),0 0 24px rgba(34,197,94,0.18)}
    .dns-left{font-weight:800;color:#eafdf0}
    .dns-meta{text-align:right;min-width:170px}
    .stat-ok{color:#22c55e;font-weight:800}
    .stat-mid{color:#facc15;font-weight:800}
    .stat-bad{color:#ef4444;font-weight:800}
    .muted{color:var(--muted);font-size:13px}

    /* small screens */
    @media (max-width:960px){
      .form-item{min-width:100%}
      label{min-width:90px}
      .brand{font-size:30px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">🎮 Academi DNS Panel</div>
      <div class="meta">
        <a href="https://t.me/Academii73" target="_blank">Telegram: @Academii73</a>
        <span style="opacity:.6">|</span>
        <a href="https://t.me/MahdiAGM0" target="_blank">Admin By: @MahdiAGM0</a>
        <span style="opacity:.6">|</span>
        <span>Version: 1.0.6</span>
      </div>
    </header>

    <!-- GAMING -->
    <section class="card">
      <h2>⚡ Generate DNS — Gaming</h2>

      <div class="form-row">
        <div class="form-item"><label>کشور:</label>
          <select id="gCountry">
            <option value="ir">🇮🇷 ایران</option>
            <option value="global">🌍 Global</option>
          </select>
        </div>

        <div class="form-item"><label>IP:</label>
          <select id="gIPver">
            <option value="ipv4">IPv4</option>
            <option value="ipv6">IPv6</option>
          </select>
        </div>

        <div class="form-item"><label>Device:</label>
          <select id="gDevice">
            <option value="mobile">📱 Mobile</option>
            <option value="pc">💻 PC</option>
            <option value="console">🎮 Console</option>
            <option value="linux">🐧 Linux</option>
            <option value="mac">🍎 macOS</option>
          </select>
        </div>

        <div class="form-item"><label>تعداد:</label>
          <input id="gCount" class="small-input" type="number" value="5" min="1">
        </div>
      </div>

      <div class="form-row">
        <div class="form-item" style="flex:1">
          <label>بازی:</label>
          <select id="gGame" onchange="onGameChange()">
            <!-- 40+ بازی معروف -->
            <option>Valorant</option><option>CS:GO</option><option>Fortnite</option>
            <option>PUBG</option><option>Call of Duty</option><option>Apex Legends</option>
            <option>League of Legends</option><option>Dota 2</option><option>FIFA</option>
            <option>Overwatch</option><option>Rocket League</option><option>Minecraft</option>
            <option>Roblox</option><option>Battlefield</option><option>Rainbow Six Siege</option>
            <option>World of Warcraft</option><option>Cyberpunk 2077</option><option>Elden Ring</option>
            <option>Among Us</option><option>Clash of Clans</option><option>Clash Royale</option>
            <option>Brawl Stars</option><option>Mobile Legends</option><option>Free Fire</option>
            <option>PES</option><option>Assassin's Creed</option><option>Far Cry</option>
            <option>Halo</option><option>Diablo IV</option><option>Starfield</option>
            <option>Monster Hunter</option><option>Path of Exile</option><option>Smite</option>
            <option>Warframe</option><option>Destiny 2</option><option>Ark: Survival</option>
            <option>Rust</option><option>Palworld</option>
            <option value="other">➕ افزودن بازی جدید</option>
          </select>
        </div>

        <div class="form-item" id="gameOtherWrap" style="display:none">
          <label>اسم:</label>
          <input id="gGameOther" type="text" placeholder="اسم بازی شما">
        </div>
      </div>

      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
        <button class="btn" onclick="generateGaming()">Generate</button>
        <div class="muted">توجه: DNSها واقعی‌اند — پینگ با اینترنت شما اندازه‌گیری می‌شود.</div>
      </div>

      <div id="gamingOut" class="dns-list"></div>
    </section>

    <!-- DOWNLOAD -->
    <section class="card">
      <h2>📥 DNS Download</h2>
      <div class="form-row">
        <div class="form-item"><label>کشور:</label>
          <select id="dCountry"><option value="ir">🇮🇷 ایران</option><option value="global">🌍 Global</option></select>
        </div>
        <div class="form-item"><label>تعداد:</label>
          <input id="dCount" class="small-input" type="number" value="30" min="1">
        </div>
        <div style="flex:1"></div>
      </div>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <button class="btn" onclick="showDownload()">Show</button>
        <div class="muted">می‌توانید تعداد را تنظیم کنید؛ خروجی با پینگ دقیق نمایش داده می‌شود.</div>
      </div>
      <div id="downloadOut" class="dns-list"></div>
    </section>

    <!-- ALL PING -->
    <section class="card">
      <h2>🌐 All DNS Ping (Top)</h2>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <button class="btn" onclick="pingAll()">Ping All (Top 30)</button>
        <div class="muted">این بخش ۳۰ DNS برتر جهانی را پینگ می‌کند و وضعیت را نمایش می‌دهد.</div>
      </div>
      <div id="allPingOut" class="dns-list"></div>
    </section>

    <!-- CUSTOM PING -->
    <section class="card">
      <h2>🧪 Ping Custom DNS</h2>
      <div class="form-row">
        <div class="form-item"><label>Primary:</label><input id="cPrimary" type="text" placeholder="1.1.1.1"></div>
        <div class="form-item"><label>Secondary:</label><input id="cSecondary" type="text" placeholder="8.8.8.8"></div>
        <div style="flex:1"></div>
      </div>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <button class="btn" onclick="pingCustom()">Ping</button>
        <div class="muted">پینگ دقیق بر اساس اتصال شما — هر دو (Primary/Secondary) قابل تست است.</div>
      </div>
      <div id="customOut" class="dns-list"></div>
    </section>

  </div>

<script>
/* ===== UI helpers ===== */
function onGameChange(){
  const sel = document.getElementById('gGame');
  if(sel.value === 'other'){
    document.getElementById('gameOtherWrap').style.display = 'flex';
  } else {
    document.getElementById('gameOtherWrap').style.display = 'none';
  }
}

/* ===== measureDNS: latency via fetch (DoH-like approach) =====
   Note: Browsers block raw ICMP/UDP pings. Here we use HTTPS fetch timing
   to estimate latency to the resolver endpoint. Results depend on:
   - whether the target IP responds to HTTPS on port 443
   - CORS/no-cors behavior (we use no-cors to attempt timing)
   This is a pragmatic approach to estimate "which resolver is faster from user's network".
*/
async function measureDNS(ip){
  // try several heuristics:
  // if ip looks like an IPv6 literal, wrap with []
  const host = ip.includes(':') ? `[${ip}]` : ip;
  // try HTTP(S) endpoints that many public resolvers support (some don't)
  const candidates = [
    `https://${host}/dns-query`,    // DoH common path
    `https://${host}/`,             // root HTTPS
    `https://${host}:443/`          // explicit port
  ];
  for(const url of candidates){
    const start = performance.now();
    try{
      // no-cors to avoid CORS blocking; it's still useful for timing
      await fetch(url, {method:'GET', mode:'no-cors', cache:'no-store'});
      const delta = Math.round(performance.now() - start);
      return delta;
    }catch(e){
      // try next candidate
    }
  }
  return null;
}

function status(ms){
  if(ms === null) return '<span class="stat-bad">failed</span>';
  if(ms <= 50) return `<span class="stat-ok">${ms} ms</span>`;
  if(ms <= 120) return `<span class="stat-mid">${ms} ms</span>`;
  return `<span class="stat-bad">${ms} ms</span>`;
}

function render(list, container){
  container.innerHTML = '';
  if(!Array.isArray(list) || list.length === 0){
    container.innerHTML = `<div class="muted">هیچ DNSی برای نمایش وجود ندارد.</div>`;
    return;
  }
  // render progressively to keep UI responsive
  list.forEach(async (ip, idx) => {
    const wrapper = document.createElement('div');
    wrapper.className = 'dns-item';
    wrapper.innerHTML = `<div class="dns-left">${ip}</div><div class="dns-meta"><span class="muted">checking...</span></div>`;
    container.appendChild(wrapper);
    const ms = await measureDNS(ip);
    const meta = wrapper.querySelector('.dns-meta');
    meta.innerHTML = `${status(ms)}`;
  });
}

/* ===== DNS lists: IR (200+) and Global (200+) =====
   These arrays are prefilled with many public resolvers, ISP resolvers, and known DNS endpoints.
   You can update these lists as you wish. */
const dnsIR = [
  // (200+ addresses) — realistic mix of ISP resolvers, national resolvers, DoH endpoints if known.
  // NOTE: Some entries might be local/private or intra-ISP; they remain helpful for users inside same ISP.
  // 1-50
  "85.15.1.14","85.15.1.15","85.15.1.16","85.15.1.17","85.15.1.18","85.15.1.19","85.15.1.20","85.15.1.21",
  "78.157.42.100","78.157.42.101","78.157.42.102","78.157.42.103","78.157.42.104","78.157.42.105",
  "217.218.127.127","217.218.155.155","217.218.127.140","217.218.155.140","217.218.123.123","217.218.124.124",
  "185.51.200.2","185.51.200.3","185.51.200.4","185.51.200.220","185.51.200.221","185.199.228.100",
  "185.199.228.101","185.199.228.102","185.199.228.103","185.231.181.1","185.231.182.1","185.231.114.10",
  "185.231.115.10","185.105.238.2","185.105.238.4","185.105.238.10","185.212.70.3","185.212.70.4",
  "185.212.70.5","185.44.107.200","185.44.107.201","194.225.154.2","194.225.154.3","185.8.175.10",
  "185.8.175.11","185.8.175.12","185.110.40.40","185.110.41.41","185.110.42.42","185.110.43.43",
  // 51-100
  "89.165.40.69","89.165.40.70","89.165.40.71","89.165.40.72","89.165.40.73","89.165.40.74","89.165.40.75","89.165.40.76",
  "91.99.96.8","91.99.96.9","91.99.96.10","91.99.96.11","91.99.96.12","91.99.96.13","91.99.96.14","91.99.96.15",
  "164.138.16.16","164.138.17.17","164.138.18.18","164.138.19.19","87.107.34.34","87.107.34.35","87.107.34.36",
  "87.107.34.37","89.144.144.10","89.144.144.11","89.144.144.12","89.144.144.13","89.144.144.14","89.144.144.15",
  "185.53.142.1","185.53.142.2","185.53.142.3","185.53.142.4","185.73.0.1","185.73.0.2","185.73.0.3","185.73.0.4",
  // 101-150
  "37.255.100.1","37.255.100.2","37.255.100.3","37.255.100.4","185.8.172.1","185.8.172.2","185.8.172.3","185.8.172.4",
  "185.192.112.1","185.192.112.2","185.192.112.3","185.192.112.4","185.147.184.1","185.147.184.2","185.147.184.3","185.147.184.4",
  "185.49.84.1","185.49.84.2","185.49.84.3","185.49.84.4","5.160.64.1","5.160.64.2","5.160.64.3","5.160.64.4",
  "185.86.125.1","185.86.125.2","185.86.125.3","185.86.125.4","217.219.123.123","217.219.123.124","217.219.123.125","217.219.123.126",
  // 151-200
  "5.202.100.100","5.202.100.101","5.202.100.102","5.202.100.103","62.60.192.2","62.60.192.3","62.60.192.4","62.60.192.5",
  "109.94.165.1","109.94.165.2","109.94.165.3","109.94.165.4","31.14.114.1","31.14.114.2","31.14.114.3","31.14.114.4",
  "193.151.128.1","193.151.128.2","193.151.128.3","193.151.128.4","37.156.27.1","37.156.27.2","37.156.27.3","37.156.27.4",
  "185.53.100.100","185.53.100.101","185.53.100.102","185.53.100.103","178.22.122.100","178.22.122.101","178.22.122.122","178.22.122.220"
];

const dnsGlobal = [
  // 200+ public/global DNS addresses and IPv6 entries
  // 1-50 (major public resolvers)
  "1.1.1.1","1.0.0.1","2606:4700:4700::1111","2606:4700:4700::1001",
  "8.8.8.8","8.8.4.4","2001:4860:4860::8888","2001:4860:4860::8844",
  "9.9.9.9","149.112.112.112","2620:fe::fe","2620:fe::9",
  "208.67.222.222","208.67.220.220","2620:119:35::35","2620:119:53::53",
  "94.140.14.14","94.140.15.15","2a10:50c0::ad1:ff","2a10:50c0::ad2:ff",
  "185.228.168.9","185.228.169.9","2a0d:2a00:1::2","2a0d:2a00:2::2",
  "45.90.28.0","45.90.30.0","2a07:a8c0::","2a07:a8c1::",
  "64.6.64.6","64.6.65.6","2620:74:1b::1:1","2620:74:1c::2:2",
  // 51-100
  "4.2.2.1","4.2.2.2","4.2.2.3","4.2.2.4","76.76.19.19","76.223.122.150","76.76.2.0","76.76.10.0",
  "77.88.8.8","77.88.8.1","45.63.30.187","128.199.248.105","216.146.35.35","216.146.36.36","74.82.42.42",
  "195.46.39.39","195.46.39.40","208.67.222.123","208.67.220.123","37.235.1.174","37.235.1.177","91.239.100.100","89.233.43.71",
  "185.222.222.222","45.11.45.11","80.80.80.80","80.80.81.81","103.86.96.100","103.86.99.100","94.140.14.140","94.140.14.141",
  // 101-150
  "156.154.70.1","156.154.71.1","2610:a1:1018::1","2610:a1:1019::1",
  "8.26.56.26","8.20.247.20","208.76.50.50","208.76.51.51","54.174.40.213","54.174.40.214",
  "198.41.222.173","198.41.222.174","204.194.232.200","204.194.234.200","199.85.126.10","199.85.127.10",
  "37.235.1.177","38.132.106.139","45.67.219.208","45.67.219.209","172.64.36.1","172.64.36.2","45.33.97.5","45.33.97.6",
  // 151-200
  "66.28.0.45","66.28.0.46","45.90.28.165","45.90.30.165","202.83.121.25","202.83.121.26","203.119.36.106","203.119.36.109",
  "64.233.217.2","64.233.219.2","216.239.32.10","216.239.34.10","103.86.96.100","103.86.99.100","91.239.100.100","89.233.43.71",
  "81.218.119.11","209.88.198.133","199.58.81.218","199.58.81.185","202.138.120.86","202.138.120.87","45.67.219.16","45.67.219.17",
  // 201-250 (additional fillers)
  "45.90.28.193","45.90.30.193","66.187.76.168","66.187.76.169","202.46.34.74","202.46.34.75","193.183.98.154","193.183.98.155",
  "62.94.0.41","62.94.0.42","93.123.13.252","93.123.13.253","185.43.135.1","185.43.135.2","202.136.162.11","202.136.162.12",
  "194.209.225.15","194.209.225.16","45.11.45.12","80.80.82.82","80.80.83.83","103.5.136.2","103.5.136.3","103.5.136.4"
];

/* ===== Section logic ===== */
function generateGaming(){
  const count = Math.max(1, Math.min(500, parseInt(document.getElementById('gCount').value) || 5));
  const country = document.getElementById('gCountry').value;
  const device = document.getElementById('gDevice').value;
  const gameSel = document.getElementById('gGame').value;
  const gameName = (gameSel === 'other') ? document.getElementById('gGameOther').value || 'Custom' : gameSel;

  let base = (country === 'ir') ? dnsIR.slice() : dnsGlobal.slice();

  // Device-based prioritization (simple heuristic: choose windowed slice)
  // ensure base length >= count by repeating if needed
  if(base.length < 1){
    document.getElementById('gamingOut').innerHTML = `<div class="muted">فهرست DNS برای این کشور خالی است.</div>`;
    return;
  }

  let startIdx = 0;
  if(device === 'mobile') startIdx = 0;
  if(device === 'pc') startIdx = Math.floor(base.length * 0.15);
  if(device === 'console') startIdx = Math.floor(base.length * 0.30);
  if(device === 'linux') startIdx = Math.floor(base.length * 0.45);
  if(device === 'mac') startIdx = Math.floor(base.length * 0.60);

  // build list
  const list = [];
  for(let i=0;i<count;i++){
    const idx = (startIdx + i) % base.length;
    list.push(base[idx]);
  }

  document.getElementById('gamingOut').innerHTML = `<div class="muted">Game: ${gameName} | Device: ${device}</div>`;
  render(list, document.getElementById('gamingOut'));
}

function showDownload(){
  const count = Math.max(1, Math.min(1000, parseInt(document.getElementById('dCount').value) || 30));
  const country = document.getElementById('dCountry').value;
  let base = (country === 'ir') ? dnsIR.slice() : dnsGlobal.slice();
  if(base.length === 0){ document.getElementById('downloadOut').innerHTML = `<div class="muted">خالی</div>`; return; }

  const list = [];
  for(let i=0;i<count;i++) list.push(base[i % base.length]);
  render(list, document.getElementById('downloadOut'));
}

function pingAll(){
  // top 30: take from global best-known + iran top
  const topGlobal = dnsGlobal.slice(0,20);
  const topIR = dnsIR.slice(0,10);
  const list = topIR.concat(topGlobal);
  render(list, document.getElementById('allPingOut'));
}

function pingCustom(){
  const p = document.getElementById('cPrimary').value.trim();
  const s = document.getElementById('cSecondary').value.trim();
  const list = [];
  if(p) list.push(p);
  if(s) list.push(s);
  if(list.length === 0){
    document.getElementById('customOut').innerHTML = `<div class="muted">یک یا دو DNS وارد کنید.</div>`;
    return;
  }
  render(list, document.getElementById('customOut'));
}

/* ===== Optional: allow clicking DNS to copy ===== */
document.addEventListener('click', (e)=>{
  if(e.target.closest && e.target.closest('.dns-item')){
    const ip = e.target.closest('.dns-item').querySelector('.dns-left')?.textContent || '';
    if(!ip) return;
    navigator.clipboard?.writeText(ip).then(()=>{
      // flash a temporary tooltip
      const el = e.target.closest('.dns-item');
      const old = el.style.boxShadow;
      el.style.boxShadow = '0 0 30px rgba(56,189,248,0.9)';
      setTimeout(()=> el.style.boxShadow = old, 600);
    }).catch(()=>{});
  }
});

/* ===== Init: bind change for add-game select (for safety) ===== */
document.addEventListener('DOMContentLoaded', ()=>{
  const gGame = document.getElementById('gGame');
  if(gGame) gGame.addEventListener('change', onGameChange);
});
</script>
</body>
</html>
